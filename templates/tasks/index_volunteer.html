{% extends "base.html" %}

{% block content %}
<div class="container">
  <h1 class="mb-4">Volunteer Dashboard</h1>

  <div class="card mb-4">
    <div class="card-body">
      <h5 class="card-title">{{ user.username }}</h5>
      <p><strong>First name:</strong> {{ user.first_name }}</p>
      <p><strong>Last name:</strong> {{ user.last_name }}</p>
      <p><strong>Email:</strong> {{ user.email }}</p>
      <p><strong>Phone:</strong> {{ user.phone_number|default:"—" }}</p>
      <p><strong>City:</strong> {{ user.city|default:"—" }}</p>
    </div>
  </div>

  <h3><a href="{% url 'tasks:task-list' %}">My Tasks</a></h3>
  {% if my_tasks %}
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Title</th>
          <th>Status</th>
          <th>Deadline</th>
        </tr>
      </thead>
      <tbody>
        {% for task in my_tasks %}
          <tr>
            <td>{{ task.title }}</td>
            <td>{{ task.status }}</td>
            <td>{{ task.deadline|date:"d.m.Y H:i" }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>You have no assigned tasks.</p>
  {% endif %}

  <h3 class="mt-4"><a href="{% url 'tasks:report-list' %}">My Reports</a></h3>
  {% if my_reports %}
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>Task</th>
          <th>Comment</th>
          <th>Verified by</th>
          <th>Verified at</th>
        </tr>
      </thead>
      <tbody>
        {% for report in my_reports %}
          <tr class="{% if not report.verified_at %}table-warning{% endif %}">
            <td>{{ report.task }}</td>
            <td>{{ report.comment }}</td>
            <td>{{ report.verified_by|default:"—" }}</td>
            <td>{{ report.verified_at|date:"d.m.Y H:i"|default:"—" }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>You haven't submitted any reports yet.</p>
  {% endif %}
</div>
{% endblock %}
